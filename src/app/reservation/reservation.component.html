<h1>Réservez un parasol !</h1>
<div class="card col-md-6 col-12 border-0 shadow-lg my-5">
	<div class="card-body p-5 position-relative pb-5">
		<div [ngClass]="{
			invalid: utilService.entreeInvalide(formulaireReservation.get('modelDateDebut')) || utilService.entreeInvalide(formulaireReservation.get('modelDateFin')) || utilService.entreeInvalide(formulaireReservation.get('parasol1'))
		}" class="user-icon p-4 bg-white border-3 position-absolute top-0 start-50 translate-middle">
			<img src="../../assets/images/beach-umbrella.svg" width="120" class="img-fluid" alt="">
		</div>
		<form [formGroup]="formulaireReservation" (ngSubmit)="reserver()">
			<div class="row">
				<div class="col-10">
					<div class="form-floating">
						<input class="form-control" formControlName="modelDateDebut" ngbDatepicker #dDebut="ngbDatepicker">
						<label>Date de début</label>
					</div>
				</div>
				<button id="button-addon" class="bi bi-calendar3 col-2" (click)="dDebut.toggle()" type="button">
					<svg width="50" height="50" viewBox="0 0 38 39" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g><path d="M0,35l0,-24l38,0l0,24c0,2.2 -1.8,4 -4,4l-30,0c-2.2,0 -4,-1.8 -4,-4Z" style="fill:#cfd8dc;fill-rule:nonzero;"/></g><path d="M38,7l0,6l-38,0l0,-6c0,-2.2 1.8,-4 4,-4l30,0c2.2,0 4,1.8 4,4Z" style="fill:#6d57a5;fill-rule:nonzero;"/><g><circle cx="28" cy="7" r="3" style="fill:#4a3b71;"/><circle cx="10" cy="7" r="3" style="fill:#4a3b71;"/></g><g><path d="M28,0c-1.1,0 -2,0.9 -2,2l0,5c0,1.1 0.9,2 2,2c1.1,0 2,-0.9 2,-2l0,-5c0,-1.1 -0.9,-2 -2,-2Z" style="fill:#b0bec5;fill-rule:nonzero;"/><path d="M10,0c-1.1,0 -2,0.9 -2,2l0,5c0,1.1 0.9,2 2,2c1.1,0 2,-0.9 2,-2l0,-5c0,-1.1 -0.9,-2 -2,-2Z" style="fill:#b0bec5;fill-rule:nonzero;"/></g><g><rect x="8" y="17" width="4" height="4" style="fill:#90a4ae;"/><rect x="14" y="17" width="4" height="4" style="fill:#90a4ae;"/><rect x="20" y="17" width="4" height="4" style="fill:#90a4ae;"/><rect x="26" y="17" width="4" height="4" style="fill:#90a4ae;"/><rect x="8" y="23" width="4" height="4" style="fill:#90a4ae;"/><rect x="14" y="23" width="4" height="4" style="fill:#90a4ae;"/><rect x="20" y="23" width="4" height="4" style="fill:#90a4ae;"/><rect x="26" y="23" width="4" height="4" style="fill:#90a4ae;"/><rect x="8" y="29" width="4" height="4" style="fill:#90a4ae;"/><rect x="14" y="29" width="4" height="4" style="fill:#90a4ae;"/><rect x="20" y="29" width="4" height="4" style="fill:#90a4ae;"/><rect x="26" y="29" width="4" height="4" style="fill:#90a4ae;"/></g></svg>
				</button>
			</div>
			<div *ngIf="utilService.entreeInvalide(formulaireReservation.get('modelDateDebut'))" class="form-text text-danger">
				<span>Veuillez saisir une date de début.</span>
			</div>
			<div class="row mt-3">
				<div class="col-10">
					<div class="form-floating">
						<input class="form-control" formControlName="modelDateFin" ngbDatepicker #dFin="ngbDatepicker">
						<label>Date de fin</label>
					</div>
				</div>
				<button id="button-addon" class="bi bi-calendar3 col-2" (click)="dFin.toggle()" type="button">
					<svg width="50" height="50" viewBox="0 0 38 39" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g><path d="M0,35l0,-24l38,0l0,24c0,2.2 -1.8,4 -4,4l-30,0c-2.2,0 -4,-1.8 -4,-4Z" style="fill:#cfd8dc;fill-rule:nonzero;"/></g><path d="M38,7l0,6l-38,0l0,-6c0,-2.2 1.8,-4 4,-4l30,0c2.2,0 4,1.8 4,4Z" style="fill:#6d57a5;fill-rule:nonzero;"/><g><circle cx="28" cy="7" r="3" style="fill:#4a3b71;"/><circle cx="10" cy="7" r="3" style="fill:#4a3b71;"/></g><g><path d="M28,0c-1.1,0 -2,0.9 -2,2l0,5c0,1.1 0.9,2 2,2c1.1,0 2,-0.9 2,-2l0,-5c0,-1.1 -0.9,-2 -2,-2Z" style="fill:#b0bec5;fill-rule:nonzero;"/><path d="M10,0c-1.1,0 -2,0.9 -2,2l0,5c0,1.1 0.9,2 2,2c1.1,0 2,-0.9 2,-2l0,-5c0,-1.1 -0.9,-2 -2,-2Z" style="fill:#b0bec5;fill-rule:nonzero;"/></g><g><rect x="8" y="17" width="4" height="4" style="fill:#90a4ae;"/><rect x="14" y="17" width="4" height="4" style="fill:#90a4ae;"/><rect x="20" y="17" width="4" height="4" style="fill:#90a4ae;"/><rect x="26" y="17" width="4" height="4" style="fill:#90a4ae;"/><rect x="8" y="23" width="4" height="4" style="fill:#90a4ae;"/><rect x="14" y="23" width="4" height="4" style="fill:#90a4ae;"/><rect x="20" y="23" width="4" height="4" style="fill:#90a4ae;"/><rect x="26" y="23" width="4" height="4" style="fill:#90a4ae;"/><rect x="8" y="29" width="4" height="4" style="fill:#90a4ae;"/><rect x="14" y="29" width="4" height="4" style="fill:#90a4ae;"/><rect x="20" y="29" width="4" height="4" style="fill:#90a4ae;"/><rect x="26" y="29" width="4" height="4" style="fill:#90a4ae;"/></g></svg>
				</button>
			</div>
			<div *ngIf="utilService.entreeInvalide(formulaireReservation.get('modelDateFin'))" class="form-text text-danger">
				<span>Veuillez saisir une date de fin.</span>
			</div>
			<hr>
			<h6>Choisisez votre parasol</h6>
			<div style="max-height: 350px;" class="parasols overflow-auto ps-3 pe-5">
				<div class="p1">
					<div id="emailHelp" class="form-text">Parasol 1</div>
					<div class="form-floating">
						<select formControlName="parasol1" class="form-select">
						<option></option>
						<option *ngFor="let item of nobreDeFils; let i=index" [ngValue]="i+1" value="1">File n° {{i+1}}</option>
						</select>
						<label >Numéro de file</label>
					</div>
				</div>
				<div *ngIf="utilService.entreeInvalide(formulaireReservation.get('parasol1'))" class="form-text text-danger">
					<span>Veuillez selectionner un parasol.</span>
				</div>
				<div class="p2 my-3">
					<div id="emailHelp" class="form-text">Parasol 2</div>
					<div class="form-floating">
						<select formControlName="parasol2" class="form-select">
						<option></option>
						<option *ngFor="let item of nobreDeFils; let i=index" [ngValue]="i+1" value="1">File n° {{i+1}}</option>
						</select>
						<label>Numéro de file</label>
					</div>
				</div>
				<div formArrayName="parasols" >
					<div *ngFor="let parasol of parasolForms.controls; let i = index" class="mb-3">
						<div class="p{{i+3}} mb-3">
							<div id="emailHelp" class="form-text">Parasol {{i+3}}</div>
							<div class="form-floating">
								<select class="form-select" [formControl]="$any(parasol)">
								<option></option>
								<option *ngFor="let item of nobreDeFils; let i=index" [ngValue]="i+1" value="1">File n° {{i+1}}</option>
								</select>
								<label>Numéro de file</label>
							</div>
						</div>
					</div>
				</div>
			</div>
			<button type="button" (click)="addUmbrella()" class="btn btn-outline-dark btn-lg mt-3">Ajouter un parasol</button>
			
			<hr>
			<div class="form-floating mt-3">
				<textarea class="form-control" formControlName="remarques" style="height: 100px"></textarea>
				<label>Remarques</label>
			</div>
			<button [disabled]="formulaireReservation.invalid" type="submit" class="btn btn-outline-plage btn-lg w-100 mt-4">Envoyer</button>
		  </form>
	</div>
</div>

<app-toast [toast]="toast"></app-toast>